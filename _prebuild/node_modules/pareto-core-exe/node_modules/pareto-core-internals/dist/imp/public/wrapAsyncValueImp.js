"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AsyncValueClass = void 0;
exports.wrapAsyncValueImp = wrapAsyncValueImp;
class AsyncValueClass {
    constructor(execute) {
        this.execute = execute;
    }
    map($v) {
        function rewrite(source, rewrite) {
            return wrapAsyncValueImp(((cb) => {
                source((v) => {
                    rewrite(v).__execute(cb);
                });
            }));
        }
        return rewrite(this.execute, $v);
    }
    __execute($i) {
        this.execute($i);
    }
}
exports.AsyncValueClass = AsyncValueClass;
/**
 * returns an {@link AsyncValue }
 * @param execute the function that produces the eventual value
 * @returns
 */
function wrapAsyncValueImp(execute) {
    return new AsyncValueClass(execute);
}
